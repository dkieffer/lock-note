(this["webpackJsonplock-note"]=this["webpackJsonplock-note"]||[]).push([[0],{112:function(e,t,n){e.exports=n(241)},117:function(e,t,n){},118:function(e,t,n){},123:function(e,t){},125:function(e,t){},135:function(e,t){},137:function(e,t){},164:function(e,t){},166:function(e,t){},167:function(e,t){},173:function(e,t){},175:function(e,t){},193:function(e,t){},196:function(e,t){},212:function(e,t){},215:function(e,t){},241:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),r=n(111),i=n.n(r),c=(n(117),n(18)),l=n(15),s=n(39),u=n(40),d=n(6),h=n(42),v=n(41);n(118);var N=function(e){var t="",n=e.title;return e.selectedNote===e.id&&(t+=" active"),o.a.createElement("li",null,o.a.createElement("button",{className:t,onClick:function(){return e.loadNote(e.id)}},n))};var m=function(e){var t,n;return null!==e.currentNoteData&&(t=e.currentNoteData.title,n=e.currentNoteData.content),o.a.createElement("div",{className:"note-area"},o.a.createElement("textarea",{value:t,className:"note-title",onChange:function(t){return e.handleTitleChange(t,e.noteKey)}}),o.a.createElement("textarea",{value:n,className:"note",onChange:e.handleChange,placeholder:"Write something\u2026",onFocus:function(t){return e.startSaveTimer(t,"contentTimer")},onBlur:function(){return e.removeSaveTimer("contentTimer")}}))};var g=function(e){var t="button ";return e.position&&(t+=e.position),o.a.createElement("button",{className:t,onClick:e.function},e.label)};var p=function(e){var t="drop-down";return e.dropDownOpen&&(t+=" -active"),o.a.createElement("div",{className:t},o.a.createElement("button",{className:"dropDown__button",onClick:function(){return e.deleteNote(e.currentNoteID)}},"Delete Note"))},f=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).setWrapperRef=a.setWrapperRef.bind(Object(d.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&(console.log("You clicked outside of me!"),this.props.function())}},{key:"render",value:function(){return this.props.listen?document.addEventListener("click",this.handleClickOutside):document.removeEventListener("click",this.handleClickOutside),o.a.createElement("div",{ref:this.setWrapperRef},this.props.children)}}]),n}(o.a.Component),I=n(119),O=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={menuOpen:!1,dropDownOpen:!1,noteList:null,noteIndex:a.loadNoteIndex(),currentNoteID:0,currentNoteIndex:null,indexTicker:a.loadIndexTicker(),currentNoteData:null,smallScreen:!1,contentTimerID:null},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleTitleChange=a.handleTitleChange.bind(Object(d.a)(a)),a.loadNote=a.loadNote.bind(Object(d.a)(a)),a.toggleMenu=a.toggleMenu.bind(Object(d.a)(a)),a.toggleDropDown=a.toggleDropDown.bind(Object(d.a)(a)),a.saveNote=a.saveNote.bind(Object(d.a)(a)),a.createNewNote=a.createNewNote.bind(Object(d.a)(a)),a.deleteNote=a.deleteNote.bind(Object(d.a)(a)),a.startSaveTimer=a.startSaveTimer.bind(Object(d.a)(a)),a.removeSaveTimer=a.removeSaveTimer.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadNoteData(),this.state.noteIndex.length>0?this.loadNote(this.state.noteIndex[0]):this.createNewNote();var e=window.innerWidth,t=!1;e<640&&(t=!0),this.setState((function(e){return{smallScreen:t}}))}},{key:"toggleMenu",value:function(){console.log("toggle menu"),this.setState({menuOpen:!this.state.menuOpen,dropDownOpen:!1})}},{key:"toggleDropDown",value:function(){console.log("toggle dropdown"),this.setState({dropDownOpen:!this.state.dropDownOpen})}},{key:"loadNoteIndex",value:function(){var e;return null!==localStorage.getItem("noteIndex")?e=JSON.parse(localStorage.getItem("noteIndex")):(e=[],localStorage.setItem("noteIndex",JSON.stringify(e))),e}},{key:"loadNoteData",value:function(){for(var e=0;e<this.state.noteIndex.length;e++){var t=this.decrypt(this.state.noteIndex[e]);this.setState(Object(l.a)({},"note"+e,t))}}},{key:"decrypt",value:function(e){var t=localStorage.getItem(e),n=I.AES.decrypt(t,"password");return JSON.parse(n.toString(I.enc.Utf8))}},{key:"loadIndexTicker",value:function(){var e;if(localStorage.getItem("indexTicker"))e=JSON.parse(localStorage.getItem("indexTicker"));else{e=0;var t=JSON.stringify(e);localStorage.setItem("indexTicker",t)}return e}},{key:"updateNoteIndex",value:function(e){var t;null!==this.state.noteIndex?(t=this.state.noteIndex).push(e):t=[e],this.setState({noteIndex:t});var n=JSON.stringify(t);localStorage.setItem("noteIndex",n)}},{key:"handleChange",value:function(e){this.setState({currentNoteData:Object(c.a)(Object(c.a)({},this.state.currentNoteData),{},{content:e.target.value}),dropDownOpen:!1})}},{key:"startSaveTimer",value:function(e,t){var n=this,a=e.target.value;if("contentTimer"===t){var o=window.setInterval((function(){a!==n.state.currentNoteData.content&&(console.log("trigger a save babies"),a=n.state.currentNoteData.content,n.saveNote(n.state.currentNoteData.title,n.state.currentNoteData.content,n.state.currentNoteID))}),3e4);this.setState({contentTimerID:o})}}},{key:"removeSaveTimer",value:function(e){"contentTimer"===e&&window.clearInterval(this.state.contentTimerID)}},{key:"handleTitleChange",value:function(e,t){var n,a=this;this.saveNote(e.target.value,this.state.currentNoteData.content,this.state.currentNoteID),this.setState((n={currentNoteData:Object(c.a)(Object(c.a)({},this.state.currentNoteData),{},{title:e.target.value})},Object(l.a)(n,"note"+t,Object(c.a)(Object(c.a)({},this.state["note"+t]),{},{title:e.target.value})),Object(l.a)(n,"dropDownOpen",!1),n),(function(){return console.log(a.state)}))}},{key:"saveNote",value:function(e,t,n){var a={id:n,title:e,createdDate:"May 16th, 2020",modifiedDate:+new Date,content:t},o=JSON.stringify(a),r=I.AES.encrypt(o,"password").toString();localStorage.setItem(n,r)}},{key:"loadNote",value:function(e){var t=localStorage.getItem(e),n=I.AES.decrypt(t,"password"),a=JSON.parse(n.toString(I.enc.Utf8)),o=this.state.noteIndex.findIndex((function(t){return t===e}));this.setState({currentNoteID:e,currentNoteIndex:o,currentNoteData:a}),this.state.smallScreen&&this.state.menuOpen&&this.toggleMenu()}},{key:"createNewNote",value:function(){var e,t=this,n=JSON.parse(localStorage.getItem("indexTicker"))+1;localStorage.setItem("indexTicker",JSON.stringify(n)),this.saveNote("Note "+n,"",n),this.setState((e={currentNoteID:n,currentNoteIndex:this.state.noteIndex.length},Object(l.a)(e,"note"+this.state.noteIndex.length,{title:"Note "+n}),Object(l.a)(e,"dropDownOpen",!1),e),(function(){t.updateNoteIndex(n),t.loadNote(n),console.log(t.state)}))}},{key:"deleteNote",value:function(e){localStorage.removeItem(e);for(var t=0;t<this.state.noteIndex.length;t++)if(this.state.noteIndex[t]===e){var n=this.state.noteIndex.slice();n.splice(t,1),console.log(n),localStorage.setItem("noteIndex",JSON.stringify(n)),0===n.length?(console.log("its zero"),this.createNewNote()):(this.setState({noteIndex:n,currentNoteID:this.state.noteIndex[t-1],currentNoteIndex:t-1,dropDownOpen:!1}),this.loadNote(this.state.noteIndex[t-1]));break}}},{key:"render",value:function(){var e=this,t=[];if(null!==this.state.noteIndex&&null!==this.state.currentNoteData)for(var n=0;n<this.state.noteIndex.length;n++){var a="";this.state["note"+n]&&(a=this.state["note"+n].title),t.push(o.a.createElement(N,{loadNote:this.loadNote,id:this.state.noteIndex[n],title:a,activeTitle:this.state.currentNoteData.title,key:n,selectedNote:this.state.currentNoteID}))}var r="menu";return this.state.menuOpen&&(r+=" active"),o.a.createElement("div",{className:"App"},o.a.createElement(g,{label:"Notes",function:this.toggleMenu,position:"top-left"}),o.a.createElement(g,{label:"Options",function:this.toggleDropDown,position:"top-right"}),o.a.createElement(f,{function:this.toggleDropDown,listen:this.state.dropDownOpen},o.a.createElement(p,{deleteNote:this.deleteNote,currentNoteID:this.state.currentNoteID,saveNote:this.saveNote,dropDownOpen:this.state.dropDownOpen})),o.a.createElement("div",{className:r},o.a.createElement(g,{label:"Close",function:this.toggleMenu}),o.a.createElement("h1",null,"Lock Note"),o.a.createElement("ul",{className:"note-list"},t),o.a.createElement("button",{className:"dropDown__button",onClick:function(){return e.createNewNote()}},"New Note")),o.a.createElement(m,{currentNoteData:this.state.currentNoteData,handleChange:this.handleChange,handleTitleChange:this.handleTitleChange,noteKey:this.state.currentNoteIndex,startSaveTimer:this.startSaveTimer,removeSaveTimer:this.removeSaveTimer}))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[112,1,2]]]);
//# sourceMappingURL=main.edfa4426.chunk.js.map