(this["webpackJsonplock-note"]=this["webpackJsonplock-note"]||[]).push([[0],{118:function(e,t,n){e.exports=n(249)},123:function(e,t,n){},124:function(e,t,n){},130:function(e,t){},132:function(e,t){},143:function(e,t){},145:function(e,t){},172:function(e,t){},174:function(e,t){},175:function(e,t){},181:function(e,t){},183:function(e,t){},201:function(e,t){},204:function(e,t){},220:function(e,t){},223:function(e,t){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(109),i=n.n(r),c=(n(123),n(39)),l=n(15),s=n(110),u=n(111),d=n(6),h=n(114),v=n(116);n(124);var m=function(e){var t="",n=e.title;return e.selectedNote===e.id&&(t+=" active"),o.a.createElement("li",null,o.a.createElement("button",{className:t,onClick:function(){return e.loadNote(e.id)}},n))};var g=function(e){var t,n;return null!==e.currentNoteData&&(t=e.currentNoteData.title,n=e.currentNoteData.content),o.a.createElement("div",{className:"note-area"},o.a.createElement("textarea",{value:t,className:"note-title",onChange:function(t){return e.handleTitleChange(t,e.noteKey)}}),o.a.createElement("textarea",{value:n,className:"note",onChange:e.handleChange,placeholder:"Write something\u2026",onFocus:function(t){return e.startSaveTimer(t,"contentTimer")},onBlur:function(){return e.removeSaveTimer("contentTimer")}}))};var p=function(e){var t="button ";return e.position&&(t+=e.position),o.a.createElement("button",{className:t,onClick:function(){return e.function(e.args)}},e.label)};var N=function(e){var t="drop-down";return e.dropDownOpen&&(t+=" -active"),o.a.createElement("div",{className:t},o.a.createElement("button",{className:"dropDown__button",onClick:function(){return e.deleteNote(e.currentNoteID)}},"Delete Note"))},f=n(112),I=n(113),w=n(32),b=n(117),D=n(115),O=function(e){Object(b.a)(n,e);var t=Object(D.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).setWrapperRef=a.setWrapperRef.bind(Object(w.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(w.a)(a)),a}return Object(I.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&(console.log("You clicked outside of me!"),this.props.function())}},{key:"render",value:function(){return this.props.listen?document.addEventListener("click",this.handleClickOutside):document.removeEventListener("click",this.handleClickOutside),o.a.createElement("div",{ref:this.setWrapperRef},this.props.children)}}]),n}(o.a.Component);var S=function(e){var t="view";return"SignIn"===e.activeView&&(t+=" -active"),o.a.createElement("div",{className:t},o.a.createElement(p,{label:"Cancel",function:e.setActiveView,args:"Main"}),o.a.createElement("h1",null,"Sign In"),o.a.createElement("p",null,"Sign in to Lock Note to encrypt your notes."),o.a.createElement("label",{htmlFor:"username"},"Username"),o.a.createElement("input",{type:"text",id:"username"}),o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"text",id:"password"}),o.a.createElement("button",null,"Submit"),o.a.createElement("p",null,"Don't have an account? Create one."))},k=n(125),x=function(e){Object(v.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={activeView:"main",menuOpen:!1,dropDownOpen:!1,noteList:null,noteIndex:a.loadNoteIndex(),currentNoteID:0,currentNoteIndex:null,indexTicker:a.loadIndexTicker(),currentNoteData:null,smallScreen:!1,contentTimerID:null},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleTitleChange=a.handleTitleChange.bind(Object(d.a)(a)),a.loadNote=a.loadNote.bind(Object(d.a)(a)),a.toggleMenu=a.toggleMenu.bind(Object(d.a)(a)),a.toggleDropDown=a.toggleDropDown.bind(Object(d.a)(a)),a.saveNote=a.saveNote.bind(Object(d.a)(a)),a.createNewNote=a.createNewNote.bind(Object(d.a)(a)),a.deleteNote=a.deleteNote.bind(Object(d.a)(a)),a.startSaveTimer=a.startSaveTimer.bind(Object(d.a)(a)),a.removeSaveTimer=a.removeSaveTimer.bind(Object(d.a)(a)),a.setActiveView=a.setActiveView.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadNoteData(),this.state.noteIndex.length>0?this.loadNote(this.state.noteIndex[0]):this.createNewNote();var e=window.innerWidth,t=!1;e<640&&(t=!0),this.setState((function(e){return{smallScreen:t}}))}},{key:"setActiveView",value:function(e){console.log("setActiveView"),console.log(e),this.setState({activeView:e})}},{key:"toggleMenu",value:function(){console.log("toggle menu"),this.setState({menuOpen:!this.state.menuOpen,dropDownOpen:!1})}},{key:"toggleDropDown",value:function(){console.log("toggle dropdown"),this.setState({dropDownOpen:!this.state.dropDownOpen})}},{key:"loadNoteIndex",value:function(){var e;return null!==localStorage.getItem("noteIndex")?e=JSON.parse(localStorage.getItem("noteIndex")):(e=[],localStorage.setItem("noteIndex",JSON.stringify(e))),e}},{key:"loadNoteData",value:function(){for(var e=0;e<this.state.noteIndex.length;e++){var t=this.decrypt(this.state.noteIndex[e]);null===t&&window.alert("Your password is incorrect."),this.setState(Object(l.a)({},"note"+e,t),console.log(this.state["note"+e]))}}},{key:"decrypt",value:function(e){console.log("decrypt!");var t=localStorage.getItem(e),n=k.AES.decrypt(t,"password");try{var a=n.toString(k.enc.Utf8)}catch(o){return null}try{return JSON.parse(a)}catch(o){return null}}},{key:"loadIndexTicker",value:function(){var e;if(localStorage.getItem("indexTicker"))e=JSON.parse(localStorage.getItem("indexTicker"));else{e=0;var t=JSON.stringify(e);localStorage.setItem("indexTicker",t)}return e}},{key:"updateNoteIndex",value:function(e){var t;null!==this.state.noteIndex?(t=this.state.noteIndex).push(e):t=[e],this.setState({noteIndex:t});var n=JSON.stringify(t);localStorage.setItem("noteIndex",n)}},{key:"handleChange",value:function(e){this.setState({currentNoteData:Object(c.a)({},this.state.currentNoteData,{content:e.target.value}),dropDownOpen:!1})}},{key:"startSaveTimer",value:function(e,t){var n=this,a=e.target.value;if("contentTimer"===t){var o=window.setInterval((function(){a!==n.state.currentNoteData.content&&(console.log("trigger a save babies"),a=n.state.currentNoteData.content,n.saveNote(n.state.currentNoteData.title,n.state.currentNoteData.content,n.state.currentNoteID))}),3e4);this.setState({contentTimerID:o})}}},{key:"removeSaveTimer",value:function(e){"contentTimer"===e&&window.clearInterval(this.state.contentTimerID)}},{key:"handleTitleChange",value:function(e,t){var n,a=this;this.saveNote(e.target.value,this.state.currentNoteData.content,this.state.currentNoteID),this.setState((n={currentNoteData:Object(c.a)({},this.state.currentNoteData,{title:e.target.value})},Object(l.a)(n,"note"+t,Object(c.a)({},this.state["note"+t],{title:e.target.value})),Object(l.a)(n,"dropDownOpen",!1),n),(function(){return console.log(a.state)}))}},{key:"saveNote",value:function(e,t,n){var a={id:n,title:e,createdDate:"May 16th, 2020",modifiedDate:+new Date,content:t},o=JSON.stringify(a),r=k.AES.encrypt(o,"password").toString();localStorage.setItem(n,r)}},{key:"loadNote",value:function(e){localStorage.getItem(e);var t=this.decrypt(e),n=this.state.noteIndex.findIndex((function(t){return t===e}));this.setState({currentNoteID:e,currentNoteIndex:n,currentNoteData:t}),this.state.smallScreen&&this.state.menuOpen&&this.toggleMenu()}},{key:"createNewNote",value:function(){var e,t=this,n=JSON.parse(localStorage.getItem("indexTicker"))+1;localStorage.setItem("indexTicker",JSON.stringify(n)),this.saveNote("Note "+n,"",n),this.setState((e={currentNoteID:n,currentNoteIndex:this.state.noteIndex.length},Object(l.a)(e,"note"+this.state.noteIndex.length,{title:"Note "+n}),Object(l.a)(e,"dropDownOpen",!1),e),(function(){t.updateNoteIndex(n),t.loadNote(n),console.log(t.state)}))}},{key:"deleteNote",value:function(e){localStorage.removeItem(e);for(var t=0;t<this.state.noteIndex.length;t++)if(this.state.noteIndex[t]===e){var n=this.state.noteIndex.slice();n.splice(t,1),console.log(n),localStorage.setItem("noteIndex",JSON.stringify(n)),0===n.length?(console.log("its zero"),this.createNewNote()):(this.setState({noteIndex:n,currentNoteID:this.state.noteIndex[t-1],currentNoteIndex:t-1,dropDownOpen:!1}),this.loadNote(this.state.noteIndex[t-1]));break}}},{key:"render",value:function(){var e=[];if(null!==this.state.noteIndex&&null!==this.state.currentNoteData)for(var t=0;t<this.state.noteIndex.length;t++){var n="";this.state["note"+t]&&(n=this.state["note"+t].title),e.push(o.a.createElement(m,{loadNote:this.loadNote,id:this.state.noteIndex[t],title:n,activeTitle:this.state.currentNoteData.title,key:t,selectedNote:this.state.currentNoteID}))}var a="menu";return this.state.menuOpen&&(a+=" active"),o.a.createElement("div",{className:"App"},o.a.createElement(p,{label:"Notes",function:this.toggleMenu,position:"top-left"}),o.a.createElement(p,{label:"Options",function:this.toggleDropDown,position:"top-right"}),o.a.createElement(O,{function:this.toggleDropDown,listen:this.state.dropDownOpen},o.a.createElement(N,{deleteNote:this.deleteNote,currentNoteID:this.state.currentNoteID,saveNote:this.saveNote,dropDownOpen:this.state.dropDownOpen})),o.a.createElement("div",{className:a},o.a.createElement(p,{label:"Close",function:this.toggleMenu}),o.a.createElement("h1",null,"Lock Note"),o.a.createElement("ul",{className:"note-list"},e),o.a.createElement(p,{label:"New Note",function:this.createNewNote}),o.a.createElement(p,{label:"Sign In",function:this.setActiveView,args:"SignIn"})),o.a.createElement(g,{currentNoteData:this.state.currentNoteData,handleChange:this.handleChange,handleTitleChange:this.handleTitleChange,noteKey:this.state.currentNoteIndex,startSaveTimer:this.startSaveTimer,removeSaveTimer:this.removeSaveTimer}),o.a.createElement(S,{activeView:this.state.activeView,setActiveView:this.setActiveView}))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.5a238329.chunk.js.map